"use strict";

const path = require(`path`);

const processMessages = require(`queueshare-process-messages`);

const start = (npmCommand) => {

    //TODO write post install/update script that installs/updates all local_node_modules

    //TODO use execa here, and in index.js: https://www.npmjs.com/package/execa

    const packageLockPath = path.resolve(__dirname, `..`, `..`, `package-lock.json`);

    //TODO use this^ to check if changes happened and restart if they did

    setTimeout(() => start(npmCommand), 1000 * 60 * 60);

};

module.exports = (npmCommand) => {

    process.on(`message`, (message) => {

        if (message === processMessages.restartConfirmation) {

            process.exit();

        }

    });

    start(npmCommand);

};
