"use strict";

const AbstractTask = require(`abstract-task`);

module.exports = class extends AbstractTask {

    async do () {

        super.do();

        let output, outputIsAnError;

        try {

            output = await this.f();

            outputIsAnError = false;

        } catch (error) {

            output = error;

            outputIsAnError = true;

        }

        if (outputIsAnError) {

            this._broadcastError(output);

        }
        else {

            this._broadcastCompletion(output);

        }


    }

    };