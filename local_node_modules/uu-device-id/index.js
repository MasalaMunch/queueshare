"use strict";

const fs = require(`fs`);
const Path = require(`Path`);
const Uuid = require(`uuid`);

const encoding = `utf8`;

module.exports = (config) => {

    const {file} = config;

    let uuDeviceId;

    try {

        uuDeviceId = fs.readFileSync(file, {encoding});

    }
    catch (error) {

        if (error.code === `ENOENT`) {

            uuDeviceId = Uuid.v4();

            fs.writeFileSync(file, uuDeviceId, {encoding});

        }
        else {

            throw error;

        }

    }

    return uuDeviceId;

};